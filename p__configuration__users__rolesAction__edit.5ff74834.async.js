(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[15],{Hob9:function(e,t,a){e.exports={searchFeild:"spc-pages-configuration-users-roles-action-edit-style-searchFeild",switchBtn:"spc-pages-configuration-users-roles-action-edit-style-switchBtn",addBtn:"spc-pages-configuration-users-roles-action-edit-style-addBtn",devider:"spc-pages-configuration-users-roles-action-edit-style-devider",activeNo:"spc-pages-configuration-users-roles-action-edit-style-activeNo",tabsWithoutHead:"spc-pages-configuration-users-roles-action-edit-style-tabsWithoutHead",toptabs:"spc-pages-configuration-users-roles-action-edit-style-toptabs",activeSwitch:"spc-pages-configuration-users-roles-action-edit-style-activeSwitch",btnCancel:"spc-pages-configuration-users-roles-action-edit-style-btnCancel"}},u3qd:function(e,t,a){"use strict";a.r(t);a("2qtc");var s=a("kLXV"),n=(a("OaEy"),a("2fM7")),c=(a("+L6B"),a("2/Rp")),r=(a("IzEo"),a("bx4M")),o=(a("14J3"),a("BMrR")),i=(a("jCWc"),a("kPKH")),l=(a("5NDa"),a("5rEg")),m=(a("BoS7"),a("Sdc0")),u=a("0Owb"),d=(a("lUTK"),a("BvKs")),f=a("k1fw"),p=(a("/xke"),a("TeRw")),b=a("jrin"),g=(a("y8nQ"),a("Vl3Y")),E=a("tJVT"),h=(a("Znn+"),a("ZTPi")),y=a("q1tI"),O=a.n(y),v=a("9kvl"),N=a("YtUG"),j=a("r+2y"),k=a("frlT"),w=a("Hob9"),C=a.n(w),S=h["a"].TabPane,I=function(e){var t=g["a"].useForm(),a=Object(E["a"])(t,1),v=a[0],w=Object(y["useState"])(null),I=Object(E["a"])(w,2),R=I[0],x=I[1],B=Object(y["useState"])(""),T=Object(E["a"])(B,2),D=T[0],U=T[1],A=Object(y["useState"])(0),F=Object(E["a"])(A,2),L=F[0],P=(F[1],Object(y["useState"])(0)),q=Object(E["a"])(P,2),H=(q[0],q[1]),M=Object(y["useState"])(0),K=Object(E["a"])(M,2),V=K[0],W=K[1],J=Object(y["useState"])(!1),z=Object(E["a"])(J,2),G=z[0],_=(z[1],Object(y["useState"])("1")),Y=Object(E["a"])(_,2),Z=Y[0],Q=Y[1],X=Object(y["useState"])(!1),$=Object(E["a"])(X,2),ee=$[0],te=$[1],ae=Object(y["useState"])(!1),se=Object(E["a"])(ae,2),ne=se[0],ce=se[1],re=Object(y["useState"])(!1),oe=Object(E["a"])(re,2),ie=oe[0],le=oe[1],me=Object(y["useState"])({}),ue=Object(E["a"])(me,2),de=ue[0],fe=ue[1],pe=Object(y["useState"])([]),be=Object(E["a"])(pe,2),ge=be[0],Ee=be[1],he=e.dispatch;Object(y["useEffect"])((function(){return e.match.params.id&&(ye(e.match.params.id),Oe(e.match.params.id)),function(){!0}}),[he]);var ye=function(t){e.dispatch({type:"roles/rolesNamesList",payload:t})},Oe=function(t){e.dispatch({type:"roles/roleDetail",payload:t})};Object(y["useEffect"])((function(){var t=!1;console.log(e);var a=e.roles.detail;if(!t&&a.count>L&&200===a.statusCode){var s;fe(a.data);var n=a.data;le(n.isActive),v.setFieldsValue((s={},Object(b["a"])(s,"roleName",n.roleName),Object(b["a"])(s,"roleDescription",n.roleDescription),Object(b["a"])(s,"isActive",n.isActive),s))}var c=e.roles.rlist;return!t&&c&&200===c.statusCode&&(console.log(c),Ee(c.data||[])),function(){t=!0}}),[e.roles]),Object(y["useEffect"])((function(){var t=!1;console.log(e);var a=e.roles.edit;return!t&&a.count>L&&200===a.statusCode?(H(a.count),U(""),p["a"]["success"]({className:"successNotifi",message:"User Roles updated.",description:a.message,icon:O.a.createElement("i",{className:"far fa-check"}),closeIcon:O.a.createElement("i",{className:"far fa-times"})}),ke()):!t&&a.count>L&&a.statusCode>400&&(p["a"]["error"]({className:"errorNotifi",message:"Getting Some error!",description:a.message,icon:O.a.createElement("i",{className:"fad fa-times"}),closeIcon:O.a.createElement("i",{className:"far fa-times"})}),H(a.count)),function(){t=!0}}),[e.roles.edit]),Object(y["useEffect"])((function(){var t=!1;console.log(e);var a=e.roles.status;return!t&&a.count>V&&200===a.statusCode?(W(a.count),p["a"]["success"]({className:"successNotifi",message:"User Roles updated.",description:a.message,icon:O.a.createElement("i",{className:"far fa-check"}),closeIcon:O.a.createElement("i",{className:"far fa-times"})}),le(!ie),te(!1),ke()):!t&&a.count>V&&a.statusCode>400&&(p["a"]["error"]({className:"errorNotifi",message:"Getting Some error!",description:a.message,icon:O.a.createElement("i",{className:"fad fa-times"}),closeIcon:O.a.createElement("i",{className:"far fa-times"})}),W(a.count)),function(){t=!0}}),[e.roles]);var ve=function(e){Q(e.key)},Ne=function(t){var a={roleId:e.match.params.id,isActive:!1,assignedRoleId:t};console.log(t,a),he({type:"roles/statusRole",payload:Object(f["a"])({},a)})},je=function(t){t.roleId=e.match.params.id,t.roleUsers=R||de.roleUsers,console.log(t),he({type:"roles/editRole",payload:Object(f["a"])({},t)})},ke=function(t){e.history.push({pathname:"/configuration/users",state:{from:e.location.pathname,tab:"2"}})},we=function(){console.log("edit"),v.submit()},Ce=O.a.createElement(d["a"],{onClick:ve,selectedKeys:[Z],mode:"horizontal",className:C.a.toptabs},O.a.createElement(d["a"].Item,{key:"1"},"Details"),O.a.createElement(d["a"].Item,{key:"2"},"Members"));return O.a.createElement(y["Fragment"],null,O.a.createElement(N["a"],Object(u["a"])({},e,{rightSide:Ce,currentName:de.roleName})),O.a.createElement("div",{className:"inerContent"},O.a.createElement(g["a"],{form:v,name:"user_info",initialValues:Object(b["a"])({},"permissions",{dashboard:{status:!0}}),layout:"vertical",onFinish:je,className:"innerFields"},O.a.createElement(h["a"],{className:C.a.tabsWithoutHead,activeKey:Z},O.a.createElement(S,{tab:"",key:"1"},O.a.createElement(r["a"],{title:"Role Details",style:{marginBottom:20},bodyStyle:{padding:"20px"},extra:O.a.createElement("div",{className:C.a.activeSwitch},O.a.createElement("strong",null,"Active"),"\xa0 ",O.a.createElement(g["a"].Item,{name:"isActive"},O.a.createElement(m["a"],{className:C.a.switchBtn,checked:ie,onChange:function(e){return ie?te(!0):le(e)}})))},O.a.createElement(o["a"],{gutter:[16,0]},O.a.createElement(i["a"],{sm:10},O.a.createElement(g["a"].Item,{name:"roleName",label:"ROLE NAME",rules:[{required:!0,message:"This field is required!"}]},O.a.createElement(l["a"],{placeholder:"ROLE NAME",type:"text"}))),O.a.createElement(i["a"],{sm:14},O.a.createElement(g["a"].Item,{name:"roleDescription",label:"DESCRIPTION",rules:[{required:!0,message:"This field is required!"}]},O.a.createElement(l["a"],{type:"text",placeholder:"DESCRIPTION"}))))),O.a.createElement(r["a"],{title:"Role Permissions & Preferences",style:{marginBottom:0},bodyStyle:{padding:"20px"}},O.a.createElement(j["a"],{form:v,permissions:de.permissions}))),O.a.createElement(S,{tab:"",key:"2"},O.a.createElement(k["a"],Object(u["a"])({},e,{allowUsers:function(e){return x(e)},userlist:de.roleUsers})))),O.a.createElement(g["a"].Item,null,O.a.createElement(c["a"],{type:"primary",style:{float:"right",marginTop:"20px",width:"100px"},onClick:function(){return ce(!0)},className:"btn-w20",disabled:G},"Save "),O.a.createElement(c["a"],{className:C.a.btnCancel,onClick:ke},"Cancel")))),O.a.createElement(s["a"],{title:"Inactivate Role?",visible:ee,onCancel:function(){return te(!1)},footer:[O.a.createElement(c["a"],{key:"back",onClick:function(){return te(!1)}},"Do not inactivate"),O.a.createElement(c["a"],{key:"submit",type:"primary",className:"btn-w25",onClick:function(){return Ne(D)},disabled:!D},"Inactivate")],className:"innerFields"},O.a.createElement("center",null,O.a.createElement("i",{className:"fad fa-exclamation-triangle fa-5x danger-text",style:{marginBottom:25}})),O.a.createElement("p",null,"There are ",de.roleUsers?de.roleUsers.length:0," users associated with this Role. In order to inactivate this Role, you must assign them to a new Role."),O.a.createElement("label",{style:{fontSize:10}},O.a.createElement("strong",null,"NEW ROLE")),O.a.createElement(n["a"],{showSearch:!0,style:{width:"100%",height:35},placeholder:"New User Role",optionFilterProp:"children",value:D,onChange:function(e){return U(e)},filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0}},ge.map((function(e){return O.a.createElement(n["a"].Option,{value:e._id,key:e._id},e.roleName)})))),O.a.createElement(s["a"],{title:"Save Changes?",visible:ne,onCancel:function(){return ce(!1)},footer:[O.a.createElement(c["a"],{key:"back",onClick:function(){return ce(!1)}},"Do not save changes"),O.a.createElement(c["a"],{key:"submit",type:"primary",className:"btn-w25",onClick:we},"Save Changes")]},O.a.createElement("center",null,O.a.createElement("i",{className:"fad fa-exclamation-triangle fa-5x danger-text",style:{marginBottom:25}})),O.a.createElement("p",{style:{marginBottom:0}},"By adding the selected users to this Role, it will replace their existing Role. Are you sure you want to do this?")))};t["default"]=Object(v["a"])((function(e){var t=e.roles;e.loading;return{roles:t}}))(I)}}]);