(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{"3mSm":function(e,t,a){"use strict";a.r(t);a("IzEo");var r=a("bx4M"),n=a("jrin"),o=(a("+L6B"),a("2/Rp")),c=a("0Owb"),i=a("k1fw"),l=a("tJVT"),s=(a("Znn+"),a("ZTPi")),u=a("q1tI"),m=a.n(u),p=a("9kvl"),d=a("hyrn"),g=a("xPig"),f=(a("5NDa"),a("5rEg")),b=(a("y8nQ"),a("Vl3Y")),y=(a("OaEy"),a("2fM7")),E=(a("tU7J"),a("wFql")),O=a("KJOB"),h=a.n(O),j=(E["a"].Text,function(e){var t=Object(u["useState"])(!1),a=Object(l["a"])(t,2),r=(a[0],a[1],function(t){t.inputValue=t.inputValue.replace("(","").replace(")","").replace("-","").replace(" ",""),t.requestType="phoneNumber",e.successCall(t)}),n=function(){e.skipMobile()},c=function(e,t){if(!e)return e;var a=e.replace(/[^\d]/g,""),r=a.length;return r<4?a:r<7?"(".concat(a.slice(0,3),") ").concat(a.slice(3)):"(".concat(a.slice(0,3),") ").concat(a.slice(3,6),"-").concat(a.slice(6,10))},i=m.a.createElement(b["a"].Item,{name:"countryCode",noStyle:!0,rules:[function(e){var t=e.getFieldValue;return{validator:function(e,a){return console.log(a,t("phoneNumber")),t("phoneNumber")&&void 0===a?Promise.reject("Country code required"):Promise.resolve()}}}]},m.a.createElement(y["a"],{style:{width:70}},m.a.createElement(y["a"].Option,{value:"+91"},"+91"),m.a.createElement(y["a"].Option,{value:"+1"},"+1")));return m.a.createElement(u["Fragment"],null,m.a.createElement(b["a"],{layout:"vertical",name:"normal_login",className:"login-form",initialValues:{remember:!0,countryCode:"+1"},onFinish:r},m.a.createElement(b["a"].Item,{name:"inputValue",label:"MOBILE NUMBER",rules:[{required:!0,message:"This field is required."},function(e){var t=e.setFieldsValue;e.getFieldValue;return{validator:function(e,a){return a?(t({inputValue:c(a)}),a.length<14?Promise.reject(""):Promise.resolve()):Promise.reject("")}}}]},m.a.createElement(f["a"],{type:"tel",addonBefore:i,placeholder:"(XXX) XXX-XXXX",autoFocus:!0})),m.a.createElement(b["a"].Item,{style:{textAlign:"right",margin:0}},m.a.createElement(o["a"],{type:"link",onClick:n},"Skip this"),m.a.createElement(o["a"],{type:"primary",htmlType:"submit",className:"btn-w25"},"Verify"))))}),v=Object(p["a"])((function(e){var t=e.login,a=e.loading;return{userLogin:t,submitting:a.effects["login/login"]}}))(j);a("i8i4");function k(e){return(e-(e%=60))/60+(9<e?":":":0")+e}var C=function(e){var t=b["a"].useForm(),a=Object(l["a"])(t,1),r=a[0],n=Object(u["useState"])(),c=Object(l["a"])(n,2),s=c[1],p=Object(u["useState"])(0),d=Object(l["a"])(p,2),g=d[0],y=d[1],E=Object(u["useState"])(""),O=Object(l["a"])(E,2),j=(O[0],O[1],Object(u["useState"])(120)),v=Object(l["a"])(j,2),C=v[0],F=v[1],S=Object(u["useState"])(!0),V=Object(l["a"])(S,2),N=V[0],P=V[1],w=Object(u["useRef"])(),x=Object(u["useRef"])(),I=Object(u["useRef"])(),T=Object(u["useRef"])(),R=Object(u["useRef"])(),A=Object(u["useRef"])(),B=null,q=function(t){console.log(t);var a=t.a+t.b+t.c+t.d+t.e+t.f,r={token:e.register.phoneNo.data.token,code:a};e.dispatch({type:"register/verifyOtp",payload:Object(i["a"])({},r)})},L=function(){clearTimeout(B),F(120),r.resetFields(),e.resend()},M=function(){clearTimeout(B),F(120),r.resetFields(),e.noValue()},X=function(){clearTimeout(B),F(120),r.resetFields(),setTimeout((function(){return e.goBackStep()}),200)};Object(u["useEffect"])((function(){clearTimeout(B),console.log(e.resetCount),F(120)}),[e.resetCount]),Object(u["useEffect"])((function(){s({})}),[]),Object(u["useEffect"])((function(){return N&&(C>0?B=setTimeout((function(){F(C-1)}),1e3):(clearTimeout(B),F(120),M())),function(){clearTimeout(B)}}),[C]),Object(u["useEffect"])((function(){var t=e.register.otp;return t.count>g&&200===t.statusCode&&(y(t.count),clearTimeout(B),P(!1),F(1200)),function(){!0}}));var D=function(e,t,a){return e.length>0?(t&&t.current.focus(),Promise.resolve()):(0===e.length&&a&&a.current.focus(),Promise.reject(" "))};return m.a.createElement(u["Fragment"],null,m.a.createElement(b["a"],{form:r,layout:"vertical",name:"normal_login",initialValues:{remember:!0},onFinish:q},m.a.createElement("div",{className:h.a.otpForm},m.a.createElement(b["a"].Item,{name:"a",rules:[function(e){var t=e.setFieldsValue;e.getFieldValue;return{validator:function(e,a){return t({a:a.charAt(a.lastIndexOf("")-1)}),D(a,x,"")}}}]},m.a.createElement(f["a"],{ref:w,autoFocus:!0})),m.a.createElement(b["a"].Item,{name:"b",rules:[function(e){var t=e.setFieldsValue;e.getFieldValue;return{validator:function(e,a){return t({b:a.charAt(a.lastIndexOf("")-1)}),D(a,I,w)}}}]},m.a.createElement(f["a"],{ref:x})),m.a.createElement(b["a"].Item,{name:"c",rules:[function(e){var t=e.setFieldsValue;e.getFieldValue;return{validator:function(e,a){return t({c:a.charAt(a.lastIndexOf("")-1)}),D(a,T,x)}}}]},m.a.createElement(f["a"],{ref:I})),m.a.createElement(b["a"].Item,{name:"d",rules:[function(e){var t=e.setFieldsValue;e.getFieldValue;return{validator:function(e,a){return t({d:a.charAt(a.lastIndexOf("")-1)}),D(a,R,I)}}}]},m.a.createElement(f["a"],{ref:T})),m.a.createElement(b["a"].Item,{name:"e",rules:[function(e){var t=e.setFieldsValue;e.getFieldValue;return{validator:function(e,a){return t({e:a.charAt(a.lastIndexOf("")-1)}),D(a,A,T)}}}]},m.a.createElement(f["a"],{ref:R})),m.a.createElement(b["a"].Item,{name:"f",rules:[function(e){var t=e.setFieldsValue;e.getFieldValue;return{validator:function(e,a){return t({f:a.charAt(a.lastIndexOf("")-1)}),D(a,"",R)}}}]},m.a.createElement(f["a"],{ref:A}))),m.a.createElement("div",{className:h.a.code1},"Verification code will expire in ",k(C-1)),m.a.createElement("div",{className:h.a.code2},"Don't recieve your verification code? ",m.a.createElement("a",{onClick:L},"Resend it")),m.a.createElement("div",{className:h.a.code3},"Enter the wrong mobile number? ",m.a.createElement("a",{onClick:X},"Fix it.")),m.a.createElement(b["a"].Item,{style:{textAlign:"center",margin:0},shouldUpdate:!0},(function(){return m.a.createElement(o["a"],{type:"primary",htmlType:"submit",className:"btn-w25",disabled:!r.isFieldsTouched(!0)||r.getFieldsError().filter((function(e){var t=e.errors;return t.length})).length},"Submit")}))))},F=Object(p["a"])((function(e){var t=e.login,a=e.loading;return{login:t,submitting:a.effects["login/login"]}}))(C),S=(E["a"].Text,function(e){var t=Object(u["useState"])(!1),a=Object(l["a"])(t,2),r=(a[0],a[1],Object(u["useState"])(!1)),n=Object(l["a"])(r,2),c=n[0],i=(n[1],Object(u["useRef"])()),s=b["a"].useForm(),p=Object(l["a"])(s,1),d=(p[0],e.dispatch,function(t){e.successCall(t)});return Object(u["useEffect"])((function(){return i.current.focus(),function(){!0}})),m.a.createElement(u["Fragment"],null,m.a.createElement(b["a"],{layout:"vertical",name:"normal_login",className:"login-form",initialValues:{remember:!0},onFinish:d},m.a.createElement(b["a"].Item,{name:"inputValue",label:"EMAIL",validateStatus:c?"error":"",rules:[{required:!0,message:"This field is required."},function(e){var t=e.setFieldsValue,a=e.getFieldValue;return{validator:function(e,r){return r?(t({inputValue:a("inputValue").toLowerCase()}),Promise.resolve()):Promise.reject("")}}}]},m.a.createElement(f["a"],{className:"hasLeftPrefix",prefix:m.a.createElement("i",{className:"fas fa-envelope"}),placeholder:"Email",autoFocus:!0,ref:i})),m.a.createElement(b["a"].Item,{style:{textAlign:"right",margin:0}},m.a.createElement(o["a"],{type:"link",onClick:function(){return e.skipEmail()}},"Skip this"),m.a.createElement(o["a"],{type:"primary",htmlType:"submit",className:"btn-w25"},"Continue"))))}),V=Object(p["a"])((function(e){var t=e.login,a=e.loading;return{userLogin:t,submitting:a.effects["login/login"]}}))(S),N=(a("2qtc"),a("kLXV")),P=(a("BPQA"),a("tnDV")),w=a("ye1Q"),x=function(e){var t=b["a"].useForm(),a=Object(l["a"])(t,1),r=a[0],c=Object(u["useState"])(!1),i=Object(l["a"])(c,2),s=i[0],p=(i[1],Object(u["useState"])(!1)),g=Object(l["a"])(p,2),f=g[0],y=g[1],E=Object(u["useState"])(""),O=Object(l["a"])(E,2),j=O[0],v=O[1],k=Object(u["useState"])(""),C=Object(l["a"])(k,2),F=C[0],S=C[1],V=Object(u["useState"])(!1),x=Object(l["a"])(V,2),I=x[0],T=x[1],R=Object(u["useState"])(!1),A=Object(l["a"])(R,2),B=A[0],q=(A[1],Object(u["useState"])("")),L=Object(l["a"])(q,2),M=L[0],X=(L[1],Object(u["useState"])([])),D=Object(l["a"])(X,2);D[0],D[1];Object(u["useEffect"])((function(){return S(e.login.login.data._id),v(e.login.login.data.profilePic),r.setFieldsValue(Object(n["a"])({},"profilePic",e.login.login.data.profilePic)),function(){!0}}),[e.dispatch]);var J=function(){e.skipPhoto()},z=function(t){y(!0),e.getPhotoData(t.profilePic)},U=function(e){T(!1),r.setFieldsValue(Object(n["a"])({},"profilePic",e))},Y=m.a.createElement("div",null,s?m.a.createElement(w["a"],null):m.a.createElement("i",{className:"fad fa-camera-retro",style:{color:"rgb(60, 183, 174)",fontSize:57}}));return m.a.createElement("div",{className:h.a.main},B&&m.a.createElement(d["a"],{content:M,type:"error"}),m.a.createElement(b["a"],{form:r,layout:"vertical",name:"photo",className:"upload-photo",onFinish:z},m.a.createElement(b["a"].Item,{name:"profilePic",validateStatus:B?"error":"",rules:[{required:!0,message:"This field is required."}]},m.a.createElement("div",{className:h.a.upImage+" cursor",onClick:function(){return T(!0)}},j?m.a.createElement("img",{src:j,alt:"avatar",style:{width:"100%"}}):Y)),m.a.createElement(b["a"].Item,{style:{textAlign:"right",margin:0}},m.a.createElement(o["a"],{type:"link",onClick:J}," Skip this "),m.a.createElement(o["a"],{type:"primary",htmlType:"submit",className:"btn-w25",disabled:f}," Add Photo "))),m.a.createElement(N["a"],{visible:I,title:"Add Profile Photo",onOk:function(){return T(!1)},onCancel:function(){return T(!1)},footer:null},m.a.createElement(P["a"],{getCropImage:U,resetVal:I,SubDirName:F,skipFun:function(){return T(!1)},previewUrl:function(e){return v(e)}})))},I=Object(p["a"])()(x),T=a("7mue"),R=a.n(T),A=s["a"].TabPane,B=function(e){var t=Object(u["useState"])(!1),a=Object(l["a"])(t,2),p=(a[0],a[1],Object(u["useState"])("1")),f=Object(l["a"])(p,2),b=f[0],y=f[1],E=Object(u["useState"])(0),O=Object(l["a"])(E,2),h=O[0],j=O[1],k=Object(u["useState"])(0),C=Object(l["a"])(k,2),S=C[0],N=C[1],P=Object(u["useState"])(null),w=Object(l["a"])(P,2),x=w[0],T=w[1],B=Object(u["useState"])(0),q=Object(l["a"])(B,2),L=q[0],M=q[1],X=Object(u["useState"])(0),D=Object(l["a"])(X,2),J=(D[0],D[1],Object(u["useState"])(0)),z=Object(l["a"])(J,2),U=z[0],Y=z[1],_=Object(u["useState"])(0),K=Object(l["a"])(_,2),Q=K[0],Z=K[1],G=Object(u["useState"])(""),W=Object(l["a"])(G,2),H=W[0],$=W[1],ee=Object(u["useState"])(!1),te=Object(l["a"])(ee,2),ae=te[0],re=te[1],ne=Object(u["useState"])(!1),oe=Object(l["a"])(ne,2),ce=oe[0],ie=oe[1],le=Object(u["useState"])(!1),se=Object(l["a"])(le,2),ue=se[0],me=se[1],pe=e.dispatch,de=Object(u["useState"])("Complete Registration"),ge=Object(l["a"])(de,2),fe=ge[0],be=ge[1],ye=function(t){t.token=H,console.log("Received values of form: ",t,e),pe({type:"register/passChange",payload:Object(i["a"])({},t)})},Ee=function(){be("Recovery Email"),re(!1),ie(!0),y("5")},Oe=function(e){e.token=H,re(!1),T(e),pe({type:"register/phNo",payload:Object(i["a"])({},e)})},he=function(){re(!1),x?pe({type:"register/phNo",payload:Object(i["a"])({},x)}):ve()},je=function(){y("4")},ve=function(){re(!1),setTimeout((function(){return y("2")}),200)},ke=function(){re(!1),y("2")},Ce=function(){be("Recovery Email"),re(!1),y("4")},Fe=function(t){re(!1);var a={token:e.register.phoneNo.data.token,code:t};pe({type:"register/verifyOtp",payload:Object(i["a"])({},a)})},Se=function(){y("7"),be("Add Profile Photo"),me(!0)},Ve=function(e){e.token=H,e.requestType="email",e.redirectLink=window.location.origin+"/user/login",pe({type:"register/recoverEmail",payload:Object(i["a"])({},e)})},Ne=function(){y("8"),be("Registration Complete")},Pe=function(e){var t={profilePic:e,token:H};console.log(e,t),pe({type:"register/photoUpload",payload:Object(i["a"])({},t)})},we=function(){var t={token:e.login.login.data.token};e.dispatch({type:"register/compRegister",payload:Object(i["a"])({},t)})};return Object(u["useEffect"])((function(){var t=!1;e.login.login.data||e.history.push("/user/login"),e.login.login.data&&$(e.login.login.data.token);var a=e.register.pass,r=e.register.phoneNo,n=e.register.otp,o=e.register.email,c=e.register.photo,i=e.register.compReg;return!t&&a.count>h&&200===a.statusCode?(y("2"),be("Mobile Verification"),j(a.count),re(!1)):(!t&&a.count>h&&201===a.statusCode||a.statusCode>=400)&&(re(!0),j(a.count)),!t&&r.count>S&&200===r.statusCode?(N(r.count),re(!1),y("3"),be("Mobile Verification")):(!t&&r.count>S&&201===r.statusCode||r.statusCode>=400&&!ce)&&(re(!0),N(r.count)),!t&&n.count>L&&200===n.statusCode?(re(!1),y("5"),be("Recovery Email"),M(n.count),T(null)):(!t&&n.count>L&&201===n.statusCode||n.statusCode>=400)&&(re(!0),M(n.count),201===n.statusCode&&y("4")),!t&&o.count>U&&200===o.statusCode?(re(!1),y("6"),be("Recovery Email"),Y(o.count)):(!t&&o.count>U&&201===o.statusCode||o.statusCode>=400&&!ue)&&(re(!0),Y(o.count)),!t&&c.count>Q&&200===c.statusCode?(re(!1),y("8"),be("Registration Complete"),Z(c.count)):(!t&&c.count>Q&&201===c.statusCode||c.statusCode>=400)&&(re(!0),Z(c.count)),!t&&i&&200===i.statusCode&&(e.dispatch({type:"register/clearAll"}),e.dispatch({type:"login/clearDataVal"}),e.dispatch({type:"login/Cleardata"}),setTimeout((function(){return e.history.push("/user/login")}),200)),function(){t=!0}})),console.log(e),m.a.createElement(r["a"],{className:R.a.register,title:fe},m.a.createElement(s["a"],{activeKey:b,className:R.a.fytabs},m.a.createElement(A,{tab:"",key:"1"},m.a.createElement("p",null,"Welcome ",e.login.login.data?e.login.login.data.fullName:"",","),m.a.createElement("p",{style:{marginBottom:"8px"}},"You\u2019re one step closer to finazling your account setup. Please create a password for your user account below:"),ae&&m.a.createElement(d["a"],{content:e.register.otp.message,type:"error"}),m.a.createElement(g["a"],Object(c["a"])({},e,{successCall:ye,buttonText:"Next"}))),m.a.createElement(A,{tab:"",key:"2"},m.a.createElement("p",null,"It is strongly recommended to add mobile verification to your user account. This will allow you to initiate a password reset or unlock your account."),m.a.createElement("p",null,"Please enter your mobile number to begin the mobile verification process."),ae&&m.a.createElement(d["a"],{content:e.register.phoneNo.message,type:"error"}),m.a.createElement(v,{skipMobile:Ee,successCall:Oe})),m.a.createElement(A,{tab:"",key:"3"},m.a.createElement("p",{style:{marginBottom:"8px"}},e.register.phoneNo.message),ae&&m.a.createElement(d["a"],{content:e.register.otp.message,type:"error"}),m.a.createElement(F,Object(c["a"])({},e,{cancelOtp:Ce,resetCount:S,otpData:Fe,resetField:L,goBackStep:ke,resend:he,noValue:je}))),m.a.createElement(A,{tab:"",key:"4"},m.a.createElement("p",{style:{marginBottom:"8px"}},"The verification code you entered has expired."),m.a.createElement("center",null,m.a.createElement(o["a"],Object(n["a"])({onClick:Ee,className:"btn-w25"},"onClick",(function(){return y("2")})),"Cancel"),"\xa0\xa0\xa0\xa0\xa0",m.a.createElement(o["a"],{type:"primary",className:"btn-w25",onClick:ve},"Resend Code"))),m.a.createElement(A,{tab:"",key:"5"},m.a.createElement("p",null,"You may also add a recovery email to your account to reset your password or unlock your account."),m.a.createElement("p",null,"Please enter your preferred recovery email address:"),ae&&m.a.createElement(d["a"],{content:e.register.email.message,type:"error"}),m.a.createElement(V,Object(c["a"])({},e,{skipEmail:Se,successCall:Ve}))),m.a.createElement(A,{tab:"",key:"6"},m.a.createElement("p",{style:{marginBottom:"8px"}},e.register.email.message||"A confirmation email was sent to the recovery email provided. You must confirm the recovery email within 72 hours."),m.a.createElement("center",null,m.a.createElement(o["a"],{type:"primary",onClick:function(){y("7"),be("Add Profile Photo")},className:"btn-w25"},"Got it!"))),m.a.createElement(A,{tab:"",key:"7"},m.a.createElement("p",{style:{marginBottom:15}},"Add a profile photo to your user account by clicking on the image below."),m.a.createElement(I,Object(c["a"])({},e,{skipPhoto:Ne,getPhotoData:Pe}))),m.a.createElement(A,{tab:"",key:"8"},m.a.createElement("p",{style:{marginBottom:"13px"}},"Your password has been changed. Please proceed to log in."),m.a.createElement("div",{style:{textAlign:"center"}},m.a.createElement(o["a"],{type:"primary",htmlType:"submit",className:" btn-w25",onClick:we},"Return to Log In")))))};t["default"]=Object(p["a"])((function(e){var t=e.login,a=e.register;e.loading;return{login:t,register:a}}))(B)},"7mue":function(e,t,a){e.exports={fytabs:"spc-pages-auth-register-style-fytabs",register:"spc-pages-auth-register-style-register",icon:"spc-pages-auth-register-style-icon",other:"spc-pages-auth-register-style-other",termModel:"spc-pages-auth-register-style-termModel"}},KJOB:function(e,t,a){e.exports={locationList:"spc-pages-auth-register-steps-style-locationList",active:"spc-pages-auth-register-steps-style-active",boxes:"spc-pages-auth-register-steps-style-boxes",code1:"spc-pages-auth-register-steps-style-code1",code2:"spc-pages-auth-register-steps-style-code2",code3:"spc-pages-auth-register-steps-style-code3",fontsize:"spc-pages-auth-register-steps-style-fontsize",otpForm:"spc-pages-auth-register-steps-style-otpForm",uploader:"spc-pages-auth-register-steps-style-uploader",upImage:"spc-pages-auth-register-steps-style-upImage"}}}]);