(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[12],{"8C2Q":function(e,t,a){e.exports={pre:"spc-pages-configuration-users-style-pre",searchFeild:"spc-pages-configuration-users-style-searchFeild",switchBtn:"spc-pages-configuration-users-style-switchBtn",addBtn:"spc-pages-configuration-users-style-addBtn",devider:"spc-pages-configuration-users-style-devider",activeNo:"spc-pages-configuration-users-style-activeNo",tabsWithoutHead:"spc-pages-configuration-users-style-tabsWithoutHead",toptabs:"spc-pages-configuration-users-style-toptabs"}},vMIn:function(e,t,a){"use strict";a.r(t);var n=a("0Owb"),r=(a("lUTK"),a("BvKs")),s=a("tJVT"),i=(a("Znn+"),a("ZTPi")),c=a("q1tI"),o=a.n(c),l=a("9kvl"),u=a("YtUG"),m=(a("IzEo"),a("bx4M")),p=(a("g9YV"),a("wCAj")),f=(a("14J3"),a("BMrR")),d=(a("+L6B"),a("2/Rp")),h=(a("BoS7"),a("Sdc0")),g=(a("jCWc"),a("kPKH")),y=(a("Telt"),a("Tckk")),v=a("k1fw"),E=a("fWQN"),b=a("mtLc"),S=a("Nsem"),N=a("oZsa"),x=a("yKVA"),w=(a("tU7J"),a("wFql")),C=(a("5NDa"),a("5rEg")),k=(a("Hx5s"),a("wd/R")),F=a.n(k),L=a("8C2Q"),O=a.n(L);function A(e){return function(){var t,a=Object(N["a"])(e);if(T()){var n=Object(N["a"])(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return Object(S["a"])(this,t)}}function T(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var B=C["a"].Search,R=w["a"].Text,j=(i["a"].TabPane,function(e){Object(x["a"])(a,e);var t=A(a);function a(e){var n;return Object(E["a"])(this,a),n=t.call(this,e),n.userListFun=function(){var e="page="+(n.state.current-1)+"&limit="+n.state.limit+"&inactive="+n.state.inactive+"&searchText="+n.state.searchText+"&sortBy="+n.state.sortBy;localStorage.setItem("userSearch",JSON.stringify(n.state)),n.props.dispatch({type:"user/userList",payload:e})},n.ShowSizeChange=function(e,t){return n.setState({limit:t},(function(){return n.userListFun()}))},n.switchFun=function(e){return n.setState({inactive:e},(function(){return n.userListFun()}))},n.ChangeOrder=function(e){return n.setState({sortBy:"asc"===n.state.sortBy?"desc":"asc"},(function(){return n.userListFun()}))},n.paginationFun=function(e){return n.setState({current:e.current},(function(){return n.userListFun()}))},n.searchVal=function(e){return n.setState({searchText:e},(function(){return n.userListFun()}))},n.shortName=function(e,t){return e.charAt(0).toLocaleUpperCase()+t.charAt(0).toLocaleUpperCase()},n.state={limit:25,total:50,current:1,sortBy:"asc",inactive:!1,searchText:""},n}return Object(b["a"])(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.location.state;t&&t.from.indexOf("users")>1?this.setState(Object(v["a"])({},JSON.parse(localStorage.getItem("userSearch"))),(function(){return e.userListFun()})):this.userListFun(),this.props.dispatch({type:"user/clearAction"})}},{key:"render",value:function(){var e=this,t=this.state,a=t.inactive,n=t.limit,r=t.searchText,s=this.props.user,i=s.list?s.list.data:{},l=i?i.data:[],u=i?i.total:0,v=i?i.totalActive:0,E=[{title:"",width:60,render:function(t,a){if(a){var n=e.shortName(a.firstName,a.lastName);return a.profilePic?o.a.createElement(y["a"],{size:40,className:"circleAvtar",src:a.profilePic}):o.a.createElement(y["a"],{size:40,className:"circleAvtar"},n)}}},{title:o.a.createElement("strong",{className:"primary-text cursor",onClick:this.ChangeOrder},"Name ",o.a.createElement("i",{className:" fal fa-sm "+("asc"===this.state.sortBy?"fa-long-arrow-up":"fa-long-arrow-down")})),dataIndex:"name",render:function(e,t){return o.a.createElement("div",{className:"tableAvtar"},o.a.createElement("div",{className:"rightContent"},o.a.createElement("div",{className:(t.isActive?"":"danger-text")+" title"},t.firstName+" "+t.lastName),o.a.createElement(R,{type:t.isActive?"secondary":"danger"},t.position)))}},{title:o.a.createElement("strong",null,"Username"),dataIndex:"username",render:function(e,t){return o.a.createElement("div",{className:t.isActive?"":"danger-text"},e)}},{title:o.a.createElement("strong",null,"Role"),dataIndex:"userRole",render:function(e,t){return o.a.createElement("div",{className:t.isActive?"":"danger-text"},e)}},{title:o.a.createElement("strong",null,"Last Login"),dataIndex:"lastLogin",render:function(e,t){return o.a.createElement("div",{className:t.isActive?"":"danger-text"},e?F()(e).format("MM/DD/YYYY, h:mm A"):"Never logged in")}},{title:"",dataIndex:"isPrimary",width:30,render:function(e,t){return o.a.createElement(c["Fragment"],null,o.a.createElement(R,{className:"primary-text"},e&&o.a.createElement("i",{className:"fad fa-check-circle",style:{fontSize:18}})),"locked"===t.userStatus&&o.a.createElement("i",{className:"fad fa-lock danger-text"}))}}];return o.a.createElement(c["Fragment"],null,o.a.createElement(f["a"],{justify:"space-between",align:"middle"},o.a.createElement(g["a"],{style:{margin:"4px 0"}},o.a.createElement("strong",{style:{fontSize:"20px"}},"Users"),o.a.createElement("span",{className:O.a.devider},"|"),o.a.createElement(R,{type:"secondary",className:O.a.activeNo}," ",v," Active Users "),o.a.createElement(B,{placeholder:"Search...",onChange:function(t){return e.searchVal(t.target.value)},style:{minHeight:28},className:O.a.searchFeild,loading:this.props.submitting,value:r})),o.a.createElement(g["a"],{style:{margin:"4px 0"}},o.a.createElement("span",{style:{color:"lightgrey",marginRight:"17px"}},"Show Inactive"),o.a.createElement(h["a"],{className:O.a.switchBtn,onChange:this.switchFun,checked:a}),o.a.createElement(d["a"],{type:"primary",className:O.a.addBtn,onClick:function(){return e.props.history.push("/configuration/users/add")}},"Add User"))),o.a.createElement(m["a"],{style:{marginTop:"15px"},bodyStyle:{padding:"0 20px"}},o.a.createElement(p["a"],{columns:E,dataSource:l,className:"customTable",onChange:this.paginationFun,rowKey:function(e){return e._id},onRow:function(t,a){return{onClick:function(a){return e.props.history.push("/configuration/users/"+t._id)}}},pagination:{position:["bottomLeft"],defaultCurrent:1,total:u,pageSize:n,showTotal:function(e,t){return o.a.createElement(R,{type:"secondary"},"Showing ".concat(t[0],"-").concat(t[1]," of ").concat(e))},showSizeChanger:!0,responsive:!0,className:"customPagination",onShowSizeChange:function(t,a){return e.ShowSizeChange(t,a)},pageSizeOptions:["25","50","100","250","500"]}})))}}]),a}(o.a.Component)),z=Object(l["a"])((function(e){var t=e.user,a=e.loading;return{user:t,submitting:a.effects["user/userList"]}}))(j),I=(a("2qtc"),a("kLXV")),P=a("55Ip");function U(e){return function(){var t,a=Object(N["a"])(e);if(D()){var n=Object(N["a"])(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return Object(S["a"])(this,t)}}function D(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var M=C["a"].Search,K=w["a"].Text,V=(i["a"].TabPane,function(e){Object(x["a"])(a,e);var t=U(a);function a(e){var n;return Object(E["a"])(this,a),n=t.call(this,e),n.roleListFun=function(){var e="page="+(n.state.current-1)+"&limit="+n.state.limit+"&inactive="+n.state.inactive+"&searchText="+n.state.searchText+"&sortBy="+n.state.sortBy;n.props.dispatch({type:"roles/roleList",payload:e})},n.ShowSizeChange=function(e,t){return n.setState({limit:t},(function(){return n.roleListFun()}))},n.switchFun=function(e){return n.setState({inactive:e},(function(){return n.roleListFun()}))},n.ChangeOrder=function(e){return n.setState({sortBy:"asc"===n.state.sortBy?"desc":"asc"},(function(){return n.roleListFun()}))},n.paginationFun=function(e){return n.setState({current:e.current},(function(){return n.roleListFun()}))},n.searchVal=function(e){return n.setState({searchText:e},(function(){return n.roleListFun()}))},n.shortName=function(e){return e.split(" ").map((function(e){return e.charAt(0)})).toString().replace(",","")},n.state={limit:25,current:1,sortBy:"asc",inactive:!1,searchText:"",visible:!1},n}return Object(b["a"])(a,[{key:"componentDidMount",value:function(){this.roleListFun(),this.props.dispatch({type:"roles/clearAction"})}},{key:"render",value:function(){var e=this,t=this.state,a=t.inactive,n=t.limit,r=t.searchText,s=t.visible,i=this.props.roles;console.log(this.props);var l=i.list?i.list.data:{},u=l?l.data:[],y=l?l.total:0,v=l?l.totalActive:0,E=[{title:o.a.createElement("strong",{className:"primary-text cursor",onClick:this.ChangeOrder},"Role Name ",o.a.createElement("i",{className:" fal fa-sm "+("asc"===this.state.sortBy?"fa-long-arrow-up":"fa-long-arrow-down")})),dataIndex:"roleName",render:function(t,a){return o.a.createElement("span",{className:a.isActive?"":"danger-text"},a.isPrimary?o.a.createElement("span",{className:"cursor",onClick:function(){a.isPrimary?e.setState({visible:!0}):console.log("not primary")}},t):o.a.createElement(P["Link"],{to:"/configuration/users/roles/"+a._id,className:a.isActive?"normal-text":"danger-text"},t))}},{title:o.a.createElement("strong",null,"Description"),dataIndex:"roleDescription",render:function(e,t){return o.a.createElement("span",{className:t.isActive?"":"danger-text"},e)}},{title:o.a.createElement("strong",null,"Members"),dataIndex:"roleUsers",render:function(e,t){return t.isActive?o.a.createElement("span",null,t.roleUsers?t.roleUsers.length:0," Members"):""}},{title:"",dataIndex:"isPrimary",width:30,render:function(e,t){return o.a.createElement(c["Fragment"],null,t.isActive&&o.a.createElement(d["a"],{type:"secondary"},o.a.createElement("i",{className:"fas fa-copy"})))}}];return o.a.createElement(c["Fragment"],null,o.a.createElement(f["a"],{justify:"space-between",align:"middle"},o.a.createElement(g["a"],{style:{margin:"4px 0"}},o.a.createElement("strong",{style:{fontSize:"20px"}},"Roles"),o.a.createElement("span",{className:O.a.devider},"|"),o.a.createElement(K,{type:"secondary",className:O.a.activeNo}," ",v," Active Users "),o.a.createElement(M,{placeholder:"Search...",onChange:function(t){return e.searchVal(t.target.value)},style:{minHeight:28},className:O.a.searchFeild,loading:this.props.submitting,value:r})),o.a.createElement(g["a"],{style:{margin:"4px 0"}},o.a.createElement("span",{style:{color:"lightgrey",marginRight:"17px"}},"Show Inactive"),o.a.createElement(h["a"],{className:O.a.switchBtn,onChange:this.switchFun,checked:a}),o.a.createElement(d["a"],{type:"primary",className:O.a.addBtn,onClick:function(){return e.props.history.push("/configuration/users/roles/add")}},"Add Role"))),o.a.createElement(m["a"],{style:{marginTop:"15px"},bodyStyle:{padding:"0 20px"}},o.a.createElement(p["a"],{columns:E,dataSource:u,onChange:this.paginationFun,rowKey:function(e){return e._id},pagination:{position:["bottomLeft"],defaultCurrent:1,total:y,pageSize:n,showTotal:function(e,t){return o.a.createElement(K,{type:"secondary"},"Showing ".concat(t[0],"-").concat(t[1]," of ").concat(e))},showSizeChanger:!0,responsive:!0,className:"customPagination",onShowSizeChange:function(t,a){return e.ShowSizeChange(t,a)},pageSizeOptions:["25","50","100","250","500"]}})),o.a.createElement(I["a"],{title:"Cannot Edit Role",visible:s,onCancel:function(){return e.setState({visible:!1})},footer:[o.a.createElement(d["a"],{key:"submit",type:"primary",className:"btn-w25",onClick:function(){return e.setState({visible:!1})}},"Got it!")]},o.a.createElement("p",{style:{marginBottom:0}},"The Role \u2018Administrator\u2019 cannot be edited. Please use the \u2018Copy Role\u2019 feature to make a copy of this role to make changes.")))}}]),a}(o.a.Component)),H=Object(l["a"])((function(e){var t=e.roles,a=e.loading;return{roles:t,submitting:a.effects["roles/roleList"]}}))(V),J=i["a"].TabPane,Y=function(e){var t=Object(c["useState"])("1"),a=Object(s["a"])(t,2),l=a[0],m=a[1],p=e.dispatch,f=function(e){m(e.key)};Object(c["useEffect"])((function(){return e.location.state&&e.location.state.tab&&m(e.location.state.tab),function(){!0}}),[p]);var d=o.a.createElement(r["a"],{onClick:f,selectedKeys:[l],mode:"horizontal",className:O.a.toptabs},o.a.createElement(r["a"].Item,{key:"1"},"Users"),o.a.createElement(r["a"].Item,{key:"2"},"Roles"));return o.a.createElement(c["Fragment"],null,o.a.createElement(u["a"],Object(n["a"])({},e,{rightSide:d})),o.a.createElement("div",{className:"inerContent"},o.a.createElement(i["a"],{className:O.a.tabsWithoutHead,activeKey:l},o.a.createElement(J,{tab:"",key:"1"},o.a.createElement(z,e)),o.a.createElement(J,{tab:"",key:"2"},o.a.createElement(H,e)))))};t["default"]=Object(l["a"])((function(e){var t=e.user,a=e.loading;return{user:t,submitting:a.effects["login/login"]}}))(Y)}}]);